<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Walsvid&#39;s Blog</title>
  
  <subtitle>Time waits for no man.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://walsvid.github.io/"/>
  <updated>2018-07-08T08:20:54.685Z</updated>
  <id>http://walsvid.github.io/</id>
  
  <author>
    <name>Walsvid</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>TensorFlow variable_scope</title>
    <link href="http://walsvid.github.io/2018/03/15/tensorflow-variable-scope/"/>
    <id>http://walsvid.github.io/2018/03/15/tensorflow-variable-scope/</id>
    <published>2018-03-15T05:52:16.000Z</published>
    <updated>2018-07-08T08:20:54.685Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><p>åœ¨ä½¿ç”¨Tensorflowå¤ç°ä¸€äº›è®ºæ–‡çš„ç»“æœçš„æ—¶å€™ï¼Œä½¿ç”¨tensorboardè¿›è¡Œå¯è§†åŒ–çš„æ—¶å€™ ä¼šå‘ç°é»˜è®¤çš„tensorflowçš„è¡Œä¸ºæ˜¯é‡æ–°ç”Ÿæˆä¸€ä¸ªvariable scope è€Œä¸æ˜¯è¿›å…¥ä¹‹å‰åå­—ç›¸åŒçš„<sup><a href="#fn_1" id="reffn_1">1</a></sup>ï¼Œè¿™æ ·ç»™æ§åˆ¶è®¡ç®—å›¾å¸¦æ¥äº†å¾ˆå¤šä¸ä¾¿ï¼ŒGithubä¸Šé¢ä¹Ÿå¾ˆå¤šäººåœ¨è®¨è®ºã€‚å¥½åœ¨ï¼Œååºçš„ç‰ˆæœ¬ä¸­TensorFlowé€šè¿‡å¢åŠ <code>variable_scope</code>çš„initå‚æ•°ä¿®æ­£äº†è¿™ä¸ªè¡Œä¸ºã€‚<a id="more"></a></p><h3 id="Minimal-Reproducible-Example2"><a href="#Minimal-Reproducible-Example2" class="headerlink" title="Minimal Reproducible Example2"></a>Minimal Reproducible Example<sup><a href="#fn_2" id="reffn_2">2</a></sup></h3><p>åŒä¸€<code>variable_scope</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'layer123'</span>):</span><br><span class="line">    v = tf.get_variable(<span class="string">'v'</span>, [], initializer=tf.constant_initializer(<span class="number">42.</span>, tf.float32))</span><br><span class="line">    w = v * <span class="number">2</span></span><br><span class="line">print(w.name)    <span class="comment"># Prints 'layer123/mul:0'</span></span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ª<code>variable_scope</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'layer123'</span>):</span><br><span class="line">    v = tf.get_variable(<span class="string">'v'</span>, [], initializer=tf.constant_initializer(<span class="number">42.</span>, tf.float32))</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'layer123'</span>):</span><br><span class="line">    w = v * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">print(w.name)    <span class="comment"># Prints 'layer123_1/mul:0'</span></span><br></pre></td></tr></table></figure><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>å¦‚æœ<code>tf.__version__ &lt; 1.5.0</code>,åˆ™å¯ä»¥ç”¨å¦‚ä¸‹<code>trick</code>é¿å…ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">"sc_name"</span>, reuse=<span class="keyword">True</span>) <span class="keyword">as</span> scope:</span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(scope.original_name_scope):</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure></p><p>åˆ©ç”¨å¤–å±‚çš„<code>variable_scope</code>çš„åŸæ¥çš„<code>original_name_scope</code>ï¼Œä»¥æ­¤ä½œä¸ºä¹‹åçš„<code>name_scope</code>çš„åç§°ã€‚</p><p>å¦‚æœ<code>tf.__version__ &gt;= 1.5.0</code>ï¼Œ<br><code>variable_scope</code> çš„<code>__init__</code>æ–¹æ³•å¢åŠ äº†å‚æ•° <code>auxiliary_name_scope</code><sup><a href="#fn_3" id="reffn_3">3</a></sup>ï¼Œç”¨äºæ§åˆ¶æ˜¯å¦åˆ›å»ºæ–°çš„name scopeã€‚</p><blockquote id="fn_1"><sup>1</sup>. <a href="https://github.com/tensorflow/tensorflow/issues/13429" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/13429</a><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote><blockquote id="fn_2"><sup>2</sup>. <a href="https://github.com/tensorflow/tensorflow/issues/6189" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/6189</a><a href="#reffn_2" title="Jump back to footnote [2] in the text."> &#8617;</a></blockquote><blockquote id="fn_3"><sup>3</sup>. <a href="https://github.com/tensorflow/tensorflow/pull/14390" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/pull/14390</a><a href="#reffn_3" title="Jump back to footnote [3] in the text."> &#8617;</a></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨Tensorflowå¤ç°ä¸€äº›è®ºæ–‡çš„ç»“æœçš„æ—¶å€™ï¼Œä½¿ç”¨tensorboardè¿›è¡Œå¯è§†åŒ–çš„æ—¶å€™ ä¼šå‘ç°é»˜è®¤çš„tensorflowçš„è¡Œä¸ºæ˜¯é‡æ–°ç”Ÿæˆä¸€ä¸ªvariable scope è€Œä¸æ˜¯è¿›å…¥ä¹‹å‰åå­—ç›¸åŒçš„&lt;sup&gt;&lt;a href=&quot;#fn_1&quot; id=&quot;reffn_1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼Œè¿™æ ·ç»™æ§åˆ¶è®¡ç®—å›¾å¸¦æ¥äº†å¾ˆå¤šä¸ä¾¿ï¼ŒGithubä¸Šé¢ä¹Ÿå¾ˆå¤šäººåœ¨è®¨è®ºã€‚å¥½åœ¨ï¼Œååºçš„ç‰ˆæœ¬ä¸­TensorFlowé€šè¿‡å¢åŠ &lt;code&gt;variable_scope&lt;/code&gt;çš„initå‚æ•°ä¿®æ­£äº†è¿™ä¸ªè¡Œä¸ºã€‚
    
    </summary>
    
      <category term="Blog" scheme="http://walsvid.github.io/categories/Blog/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://walsvid.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ— ç©·åºåˆ—å¯¹åº”å‡½æ•°çš„ä¸€ç§å¯»æ‰¾æ–¹æ³•</title>
    <link href="http://walsvid.github.io/2017/11/19/sequencetofunction/"/>
    <id>http://walsvid.github.io/2017/11/19/sequencetofunction/</id>
    <published>2017-11-19T11:32:01.000Z</published>
    <updated>2018-07-08T06:31:34.505Z</updated>
    
    <content type="html"><![CDATA[<p>é—®é¢˜çš„èµ·æºæ˜¯çŸ¥ä¹ä¸Šæœ‰äººæäº†ä¸€ä¸ªé—®é¢˜<sup><a href="#fn_1" id="reffn_1">1</a></sup>ã€Œé™¤äº†é çŒœå’Œä¸ä¼˜é›…çš„æ„é€ ï¼Œå¦‚ä½•å‡½æ•°åŒ–ç‰¹æ®Šæ•°åˆ—ï¼Ÿã€é¢˜ä¸»æå‡ºçš„æ•°åˆ—æ˜¯ï¼š<code>1,1,1,0,-1,0,1,0,-1,0â€¦</code><a id="more"></a>å¯¹äºè¿™ä¸ªæ— ç©·çš„åºåˆ—ï¼Œæ’å€¼çš„æ–¹æ³•å¯ä»¥è¯´ä¸æ˜¯éå¸¸æœ‰æ•ˆï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å¯¹äºè¿™ä¸€ç±»é—®é¢˜å…¶å®æœ‰æ¯”è¾ƒæœºæ¢°çš„è§£æ³•ï¼š<br>é¦–å…ˆæŠŠæ•°åˆ—çœ‹åšæ˜¯å¯¹åº”ç”Ÿæˆå‡½æ•°<sup><a href="#fn_2" id="reffn_2">2</a></sup>ï¼ˆGenerating functionï¼‰çš„ç³»æ•°ï¼ˆcoefficientï¼‰ï¼Œç„¶åæŠŠç”Ÿæˆå‡½æ•°çœ‹åšæ˜¯æ‰€æ±‚å‡½æ•°åœ¨é¢‘åŸŸä¸Šçš„è¡¨è¾¾å¼ï¼Œè½¬å›å®æ•°åŸŸç”¨é€†Zå˜æ¢å°±å¯ä»¥äº†ã€‚</p><h2 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h2><p>OKï¼Œæœ‰äº†æ€è·¯ä¹‹åçœ‹ä¸€ä¸‹å…·ä½“æ€ä¹ˆåšã€‚æ•°åˆ—æ˜¯â€œ1,1,1,0,-1,0,1,0,-1,0â€¦â€ï¼Œçœ‹ä¸€ä¸‹åé¢å¾ªç¯çš„éƒ¨åˆ†æ˜¯-1,0,1,0,-1,â€¦è¿™ç§å¾ªç¯ï¼Œé‚£ä¹ˆæ˜¯å¯¹åº”å“ªä¸ªå‡½æ•°çš„å±•å¼€å‘¢ï¼Ÿç”¨OEISæŸ¥ä¸€ä¸‹ï¼Œå¾—åˆ°<code>A056594</code><sup><a href="#fn_3" id="reffn_3">3</a></sup>ï¼šPeriodic sequence 1,0,-1,0â€¦;expansion of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{1+x^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p><figure class="highlight mma"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CoefficientList</span>[<span class="keyword">Series</span>[(<span class="number">1</span> + x^<span class="number">2</span>)^(<span class="number">-1</span>), &#123;x, 0, 12&#125;], x]</span><br></pre></td></tr></table></figure><p>å¾—åˆ°çš„ç³»æ•°çš„Arrayå¦‚ä¸‹ï¼š<br><figure class="highlight mma"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;1, 0, -1, 0, 1, 0, -1, 0, 1, 0, -1, 0, 1&#125;</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ç”¨æ³°å‹’å±•å¼€<sup><a href="#fn_4" id="reffn_4">4</a></sup></p><p>åˆ©ç”¨ç”Ÿæˆå‡½æ•°çš„ç›¸å…³çš„çŸ¥è¯†<sup><a href="#fn_5" id="reffn_5">5</a></sup>ï¼Œå’Œå‰ä¸¤é¡¹æ‹¼ä¸€ä¸‹:<br><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>g</mi></mrow><mo>(</mo><mi>z</mi><mo>)</mo><mo>=</mo><mn>2</mn><mo>+</mo><mi>z</mi><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mfrac><mrow><msup><mi>z</mi><mn>3</mn></msup><mo>+</mo><mn>2</mn><msup><mi>z</mi><mn>2</mn></msup><mo>+</mo><mi>z</mi><mo>+</mo><mn>1</mn></mrow><mrow><msup><mi>z</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\mathcal{g}(z) = 2+z-\frac{1}{1+z^2}=\frac{z^3+2 z^2+z+1}{z^2+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.260438em;vertical-align:-0.7693300000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">g</span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>ç”±äºç”Ÿæˆå‡½æ•°å’ŒZå˜æ¢å¯¹åº”çš„å˜é‡çš„æ¬¡æ•°ç›¸å·®ä¸€ä¸ªç¬¦å·<sup><a href="#fn_6" id="reffn_6">6</a></sup>ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€ç‚¹å˜æ¢ï¼Œç”¨$1/z$æ›¿æ¢$z$</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="script">G</mi></mrow><mo>(</mo><mi>z</mi><mo>)</mo><mo>=</mo><mfrac><mrow><msup><mi>z</mi><mn>3</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>z</mi><mo>+</mo><mn>1</mn></mrow><mrow><msup><mi>z</mi><mn>3</mn></msup><mo>+</mo><mi>z</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\mathcal{G}(z) = \frac{z^3+z^2+2 z+1}{z^3+z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.260438em;vertical-align:-0.7693300000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"><span class="mord mathcal" style="margin-right:0.0593em;">G</span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span><p>ç”¨é€†Zå˜æ¢å¾—åˆ°çš„å¾…æ±‚å‡½æ•°ï¼š<br><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="script">F</mi></mrow><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mn>1</mn><mo>âˆ’</mo><mi>Î¸</mi><mo>(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo>)</mo><mrow><mo fence="true">(</mo><mn>1</mn><mo>+</mo><mi>cos</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Ï€</mi><mi>n</mi></mrow><mrow><mn>2</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{F}(n)=1-\theta (n-2)\left(1+\cos \left(\frac{\pi  n}{2}\right)\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.15em;"></span><span class="strut bottom" style="height:1.8359999999999999em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"><span class="mord mathcal" style="margin-right:0.09931em;">F</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mop">cos</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span></span></span></span></p><p>è¿™é‡Œçš„Î¸(x)å…·ä½“è§£é‡Šä¸ºHeaviside step function<sup><a href="#fn_7" id="reffn_7">7</a></sup>ï¼ŒMathematicaé‡Œé¢çš„<code>UnitStep</code>å’Œ<code>Heaviside</code>æœ‰å°‘è®¸åŒºåˆ«<sup><a href="#fn_8" id="reffn_8">8</a></sup>ï¼Œæœ‰æ—¶ä¹Ÿå†™ä½œH(x)æˆ–è€…ğŸ™(x)ï¼Œè¿™ä¸ªğŸ™åœ¨YOLOçš„è®ºæ–‡ä¸­<sup><a href="#fn_9" id="reffn_9">9</a></sup>ä¹Ÿç”¨åˆ°äº†ï¼Œç”¨äºæ„é€ æŸå¤±å‡½æ•°ã€‚</p><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><p>å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä»…ä»…å¯ä»¥æ„é€ è¿™ä¸ªåºåˆ—å¯¹åº”çš„å‡½æ•°ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–é€ ä¸€ä¸ªæ•°åˆ—ï¼š <code>1,1,1,2,1,0,-1,-2,-1,0,1,2,1,0,-1,-2,-1,0,1,2,1,0,-1,-2,-1</code>ï¼Œç”¨Mathematicaç¼–ç¨‹æ¥æ‰¾åˆ°æœ€åçš„å‡½æ•°ã€‚</p><figure class="highlight mma"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">seq = &#123;1,1,1,2,1,0,-1,-2,-1,0,1,2,1,0,-1,-2,-1,0,1,2,1,0,-1,-2,-1&#125;</span><br><span class="line">g[z_] = <span class="keyword">FindGeneratingFunction</span>[seq, z]</span><br><span class="line">G[z_] = <span class="keyword">Simplify</span>[ g[z] /. z -&gt; <span class="number">1</span>/z]</span><br><span class="line">f[n_] = <span class="keyword">ExpToTrig</span>[<span class="keyword">FullSimplify</span>[<span class="keyword">ExpToTrig</span>[<span class="keyword">InverseZTransform</span>[G[z], z, n]]]]</span><br></pre></td></tr></table></figure><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mo>(</mo><mi>z</mi><mo>)</mo><mo>=</mo><mfrac><mrow><msup><mi>z</mi><mn>5</mn></msup><mo>+</mo><mn>2</mn><msup><mi>z</mi><mn>4</mn></msup><mo>+</mo><mn>2</mn><msup><mi>z</mi><mn>3</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><mo>+</mo><mi>z</mi><mo>+</mo><mn>1</mn></mrow><mrow><msup><mi>z</mi><mn>4</mn></msup><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">g(z)=\frac{z^5+2 z^4+2 z^3+z^2+z+1}{z^4+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.260438em;vertical-align:-0.7693300000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">5</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>(</mo><mi>z</mi><mo>)</mo><mo>=</mo><mfrac><mrow><msup><mi>z</mi><mn>5</mn></msup><mo>+</mo><msup><mi>z</mi><mn>4</mn></msup><mo>+</mo><msup><mi>z</mi><mn>3</mn></msup><mo>+</mo><mn>2</mn><msup><mi>z</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>z</mi><mo>+</mo><mn>1</mn></mrow><mrow><msup><mi>z</mi><mn>5</mn></msup><mo>+</mo><mi>z</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">G(z)=\frac{z^5+z^4+z^3+2 z^2+2 z+1}{z^5+z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.260438em;vertical-align:-0.7693300000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">G</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">5</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">5</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable><mtr><mtd><mrow><mn>1</mn></mrow></mtd><mtd><mrow><mtext><mtext>Â </mtext><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi><mtext>Â </mtext></mtext><mi>n</mi><mo>&lt;</mo><mn>2</mn></mrow></mtd></mtr><mtr><mtd><mrow><mo>âˆ’</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>Ï€</mi><mi>n</mi></mrow></msup><mrow><mo fence="true">(</mo><mrow><mo fence="true">(</mo><msqrt><mrow><mn>2</mn></mrow></msqrt><mo>+</mo><mn>1</mn><mo fence="true">)</mo></mrow><mi>sin</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Ï€</mi><mi>n</mi></mrow><mrow><mn>2</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mo>+</mo><mn>1</mn><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mi>cos</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Ï€</mi><mi>n</mi></mrow><mrow><mn>4</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mo>âˆ’</mo><mi>sin</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Ï€</mi><mi>n</mi></mrow><mrow><mn>4</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mo fence="true">)</mo></mrow></mrow></mtd><mtd><mrow><mtext><mtext>Â </mtext><mi mathvariant="normal">e</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">e</mi><mtext>Â </mtext></mtext></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">f(n)=\begin{cases}1 &amp;  \text{ if } n&lt;2 \\-e^{i \pi  n} \left(\left(\sqrt{2}+1\right) \sin \left(\frac{\pi  n}{2}\right)+1\right) \left(\cos \left(\frac{\pi  n}{4}\right)-\sin \left(\frac{\pi  n}{4}\right)\right)  &amp; \text{ else }\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.888em;"></span><span class="strut bottom" style="height:3.276em;vertical-align:-1.388em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist"><span style="top:-0.8799999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">1</span></span></span><span style="top:0.7019999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord">âˆ’</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.11609500000000006em;"><span class="style-wrap reset-textstyle textstyle uncramped">âˆš</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="mord displaystyle textstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.8760950000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mop">sin</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mop">cos</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">4</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mbin">âˆ’</span><span class="mop">sin</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">4</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist"><span style="top:-0.8799999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mspace">Â </span><span class="mord mathrm">i</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mord mspace">Â </span></span><span class="mord mathit">n</span><span class="mrel">&lt;</span><span class="mord mathrm">2</span></span></span><span style="top:0.7019999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mspace">Â </span><span class="mord mathrm">e</span><span class="mord mathrm">l</span><span class="mord mathrm">s</span><span class="mord mathrm">e</span><span class="mord mspace">Â </span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span><p>è¿™ä¸ªå‡½æ•°æ˜¯å¤å‡½æ•°ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¯è§†åŒ–</p><figure class="highlight mma"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DiscretePlot</span>[f[n], &#123;n, 0, 20&#125;]</span><br><span class="line"><span class="keyword">ParametricPlot</span>[&#123;Re[f[x]], Im[f[x]]&#125;, &#123;x, 0, 4 Pi&#125;]</span><br><span class="line"><span class="keyword">Plot</span>[&#123;Re[f[x]], Im[f[x]]&#125;, &#123;x, 0, 20&#125;, <span class="keyword">PlotRange</span> -&gt; <span class="keyword">All</span>, <span class="keyword">PlotLegends</span> -&gt; &#123;"Re f(x)", "Im f(x)"&#125;]</span><br><span class="line">rfPoints = <span class="keyword">Table</span>[&#123;x, Re[f[x]], Im[f[x]]&#125;, &#123;x, 0, 20&#125;]</span><br><span class="line"><span class="keyword">Show</span>[</span><br><span class="line"> <span class="keyword">ParametricPlot3D</span>[&#123;x, Re[f[x]], Im[f[x]]&#125;, &#123;x, 0, 20&#125;,</span><br><span class="line">  <span class="keyword">PlotRange</span> -&gt; <span class="keyword">All</span>, <span class="keyword">ViewVertical</span> -&gt; &#123;0, 1, 0&#125;, <span class="keyword">BoxRatios</span> -&gt; &#123;2, 1, 1&#125;,</span><br><span class="line">   <span class="keyword">ViewPoint</span> -&gt; &#123;2, 2, 10&#125;],</span><br><span class="line"> <span class="keyword">Graphics3D</span>[&#123;PointSize[0.01], Red, Point[rfPoints]&#125;],</span><br><span class="line"> <span class="keyword">ImageSize</span> -&gt; <span class="keyword">Large</span></span><br><span class="line"> ]</span><br></pre></td></tr></table></figure><p>å‡½æ•°çš„ç¦»æ•£å€¼ï¼ˆåªå¯¹åº”æ•´æ•°ç‚¹ï¼‰ï¼š<br><img src="/2017/11/19/sequencetofunction/1.png" title="ç¦»æ•£å‡½æ•°å€¼"><br>å‡½æ•°åœ¨å¤å¹³é¢çš„å–å€¼å›¾åƒï¼š<br><img src="/2017/11/19/sequencetofunction/2.png" title="å‡½æ•°åœ¨å¤å¹³é¢çš„å–å€¼"><br>åˆ†åˆ«ç»˜åˆ¶å‡ºå‡½æ•°çš„å®éƒ¨å’Œè™šéƒ¨çš„å›¾åƒï¼š<br><img src="/2017/11/19/sequencetofunction/3.png" title="å‡½æ•°çš„å–å€¼åˆ†å®éƒ¨å’Œè™šéƒ¨"><br>å‡½æ•°åœ¨å¤ç©ºé—´çš„å–å€¼ï¼Œçº¢è‰²çš„ç‚¹æ˜¯æ•´æ•°ç‚¹ï¼Œå¯¹åº”ç¬¬ä¸€å¼ ç¦»æ•£å€¼çš„å›¾ï¼š<br><img src="/2017/11/19/sequencetofunction/4.png" title="å‡½æ•°åœ¨å¤ç©ºé—´çš„å–å€¼"></p><blockquote id="fn_1"><sup>1</sup>. <a href="https://www.zhihu.com/question/55950733" target="_blank" rel="noopener">https://www.zhihu.com/question/55950733</a><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote><blockquote id="fn_2"><sup>2</sup>. <a href="https://en.wikipedia.org/wiki/Generating_function" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Generating_function</a><a href="#reffn_2" title="Jump back to footnote [2] in the text."> &#8617;</a></blockquote><blockquote id="fn_3"><sup>3</sup>. <a href="https://oeis.org/search?q=1%2C0%2C-1%2C0%2C1%2C0%2C-1%2C0%2C1" target="_blank" rel="noopener">https://oeis.org/search?q=1%2C0%2C-1%2C0%2C1%2C0%2C-1%2C0%2C1</a><a href="#reffn_3" title="Jump back to footnote [3] in the text."> &#8617;</a></blockquote><blockquote id="fn_4"><sup>4</sup>. <a href="https://en.wikipedia.org/wiki/Taylor_series" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Taylor_series</a><a href="#reffn_4" title="Jump back to footnote [4] in the text."> &#8617;</a></blockquote><blockquote id="fn_5"><sup>5</sup>. <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-042j-mathematics-for-computer-science-fall-2005/readings/ln11.pdf" target="_blank" rel="noopener">https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-042j-mathematics-for-computer-science-fall-2005/readings/ln11.pdf</a><a href="#reffn_5" title="Jump back to footnote [5] in the text."> &#8617;</a></blockquote><blockquote id="fn_6"><sup>6</sup>. <a href="https://math.stackexchange.com/questions/137178/why-do-engineers-use-the-z-transform-and-mathematicians-use-generating-functions" target="_blank" rel="noopener">https://math.stackexchange.com/questions/137178/why-do-engineers-use-the-z-transform-and-mathematicians-use-generating-functions</a><a href="#reffn_6" title="Jump back to footnote [6] in the text."> &#8617;</a></blockquote><blockquote id="fn_7"><sup>7</sup>. <a href="https://en.wikipedia.org/wiki/Heaviside_step_function" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Heaviside_step_function</a><a href="#reffn_7" title="Jump back to footnote [7] in the text."> &#8617;</a></blockquote><blockquote id="fn_8"><sup>8</sup>. <a href="http://reference.wolfram.com/search/?q=Heaviside" target="_blank" rel="noopener">http://reference.wolfram.com/search/?q=Heaviside</a><a href="#reffn_8" title="Jump back to footnote [8] in the text."> &#8617;</a></blockquote><blockquote id="fn_9"><sup>9</sup>. <a href="https://arxiv.org/abs/1506.02640" target="_blank" rel="noopener">https://arxiv.org/abs/1506.02640</a><a href="#reffn_9" title="Jump back to footnote [9] in the text."> &#8617;</a></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é—®é¢˜çš„èµ·æºæ˜¯çŸ¥ä¹ä¸Šæœ‰äººæäº†ä¸€ä¸ªé—®é¢˜&lt;sup&gt;&lt;a href=&quot;#fn_1&quot; id=&quot;reffn_1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;ã€Œé™¤äº†é çŒœå’Œä¸ä¼˜é›…çš„æ„é€ ï¼Œå¦‚ä½•å‡½æ•°åŒ–ç‰¹æ®Šæ•°åˆ—ï¼Ÿã€é¢˜ä¸»æå‡ºçš„æ•°åˆ—æ˜¯ï¼š&lt;code&gt;1,1,1,0,-1,0,1,0,-1,0â€¦&lt;/code&gt;
    
    </summary>
    
      <category term="Blog" scheme="http://walsvid.github.io/categories/Blog/"/>
    
    
      <category term="æ•°å­¦" scheme="http://walsvid.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>å¯¹Tensorflowè¿›è¡Œæ€§èƒ½å‰–æ</title>
    <link href="http://walsvid.github.io/2017/03/25/profiletensorflow/"/>
    <id>http://walsvid.github.io/2017/03/25/profiletensorflow/</id>
    <published>2017-03-25T13:25:04.000Z</published>
    <updated>2018-03-15T05:53:24.063Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ª<code>Illarion Khlestov</code>çš„åšæ–‡ï¼šåŸæ–‡é“¾æ¥<sup><a href="#fn_1" id="reffn_1">1</a></sup><br>å¦‚ä»ŠTensorFlowæ˜¯æœ€å¸¸ç”¨çš„æœºå™¨å­¦ä¹ åº“ä¹‹ä¸€ã€‚æœ‰çš„æ—¶å€™ï¼Œå¯¹Tensorflowè¿›è¡Œæ€§èƒ½å‰–ææ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œé€šè¿‡æ€§èƒ½å‰–æå¯ä»¥äº†è§£ä»€ä¹ˆæ“ä½œæ›´èŠ±è´¹æ—¶é—´ã€‚è¿™å¯ä»¥ç”¨tensorflow timelineæ¨¡å—å®Œæˆã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ‰¾ä¸åˆ°ä»»ä½•æ˜ç¡®çš„æ•™ç¨‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚<a id="more"></a>æ‰€ä»¥åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å°†å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸»é¢˜ï¼š</p><ul><li>å¦‚ä½•æ‰§è¡ŒTensorflowä»£ç çš„åˆ†æ</li><li>å¦‚ä½•ä»å¤šä¸ªsessionè¿è¡Œä¸­åˆå¹¶æ—¶é—´è½´</li><li>åœ¨åˆ†æè¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ä»¥åŠå¦‚ä½•è§£å†³é—®é¢˜</li></ul><h2 id="ç®€å•çš„ä¾‹å­"><a href="#ç®€å•çš„ä¾‹å­" class="headerlink" title="ç®€å•çš„ä¾‹å­"></a>ç®€å•çš„ä¾‹å­</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸‹é¢æ˜¯StackOverflowçš„ç­”æ¡ˆ<sup><a href="#fn_2" id="reffn_2">2</a></sup>ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.client <span class="keyword">import</span> timeline</span><br><span class="line"></span><br><span class="line">a = tf.random_normal([<span class="number">2000</span>, <span class="number">5000</span>])</span><br><span class="line">b = tf.random_normal([<span class="number">5000</span>, <span class="number">1000</span>])</span><br><span class="line">res = tf.matmul(a, b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># add additional options to trace the session execution</span></span><br><span class="line">    options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)</span><br><span class="line">    run_metadata = tf.RunMetadata()</span><br><span class="line">    sess.run(res, options=options, run_metadata=run_metadata)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create the Timeline object, and write it to a json file</span></span><br><span class="line">    fetched_timeline = timeline.Timeline(run_metadata.step_stats)</span><br><span class="line">    chrome_trace = fetched_timeline.generate_chrome_trace_format()</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'timeline_01.json'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(chrome_trace)</span><br></pre></td></tr></table></figure></p><p>åº”è¯¥æ³¨æ„åˆ°ç»™<code>session</code>è¿è¡Œæ—¶æ·»åŠ çš„é¢å¤–çš„<code>options</code>å’Œ<code>run_metadata</code>ï¼Œè¿™ä¸ªè„šæœ¬åº”è¯¥åœ¨<code>CPU</code>å’Œ<code>GPU</code>ä¸Šè¿è¡Œï¼Œåœ¨æ‰§è¡Œä¹‹åæˆ‘ä»¬ä¼šè·å¾—<code>timeline_01.json</code>å’Œæ€§èƒ½å‰–æçš„æ•°æ®ï¼Œè¿™äº›éƒ½ä»¥Chromeçš„traceæ–‡ä»¶å½¢å¼å­˜å‚¨ã€‚å¦‚æœä½ è¿è¡Œè„šæœ¬å¤±è´¥äº†ï¼Œå°è¯•<strong>Issues during profiling</strong>è¿™ä¸€èŠ‚çš„ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚</p><p>è¦æŸ¥çœ‹å­˜å‚¨çš„æ•°æ®ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨Chromeæµè§ˆå™¨ï¼ˆä¸å¹¸çš„æ˜¯æ®æˆ‘æ‰€çŸ¥ï¼Œåªæœ‰å®ƒæ”¯æŒè‡ªå·±çš„è·Ÿè¸ªæ ¼å¼ï¼‰ã€‚è½¬åˆ°<code>chrome://</code>è·Ÿè¸ªé¡µé¢ã€‚åœ¨å·¦ä¸Šè§’ï¼Œæ‚¨ä¼šçœ‹åˆ°åŠ è½½æŒ‰é’®ã€‚æŒ‰ä¸‹å®ƒå¹¶åŠ è½½æˆ‘ä»¬çš„JSONæ–‡ä»¶ã€‚</p><img src="/2017/03/25/profiletensorflow/1.png" title="Example profiling of our simple script on CPU."><p>åœ¨é¡¶éƒ¨æ‚¨å°†çœ‹åˆ°ä»¥msä¸ºå•ä½çš„æ—¶é—´è½´ã€‚è¦è·å¾—æœ‰å…³æ“ä½œçš„æ›´å‡†ç¡®çš„ä¿¡æ¯ï¼Œåªéœ€ç‚¹å‡»å®ƒã€‚è¿˜æœ‰åœ¨å³ä¾§æœ‰ç®€å•çš„å·¥å…·ï¼šé€‰æ‹©ï¼Œå¹³ç§»ï¼Œç¼©æ”¾å’Œæ—¶é—´ã€‚</p><h2 id="æ¯”è¾ƒå¤æ‚çš„ä¾‹å­"><a href="#æ¯”è¾ƒå¤æ‚çš„ä¾‹å­" class="headerlink" title="æ¯”è¾ƒå¤æ‚çš„ä¾‹å­"></a>æ¯”è¾ƒå¤æ‚çš„ä¾‹å­</h2><p>ç°åœ¨è®©æˆ‘ä»¬ç”¨ä¸€äº›å ä½ç¬¦å’Œä¼˜åŒ–å™¨æ¥å®šä¹‰æ›´å¤æ‚çš„ä¾‹å­ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> tempfile</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.layers <span class="keyword">import</span> fully_connected <span class="keyword">as</span> fc</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.client <span class="keyword">import</span> timeline</span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">inputs = tf.placeholder(tf.float32, [batch_size, <span class="number">784</span>])</span><br><span class="line">targets = tf.placeholder(tf.float32, [batch_size, <span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">"layer_1"</span>):</span><br><span class="line">    fc_1_out = fc(inputs, num_outputs=<span class="number">500</span>, activation_fn=tf.nn.sigmoid)</span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">"layer_2"</span>):</span><br><span class="line">    fc_2_out = fc(fc_1_out, num_outputs=<span class="number">784</span>, activation_fn=tf.nn.sigmoid)</span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">"layer_3"</span>):</span><br><span class="line">    logits = fc(fc_2_out, num_outputs=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">loss = tf.reduce_mean(</span><br><span class="line">    tf.nn.softmax_cross_entropy_with_logits(logits=logits, labels=targets))</span><br><span class="line">train_op = tf.train.GradientDescentOptimizer(<span class="number">0.01</span>).minimize(loss)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    mnist_save_dir = os.path.join(tempfile.gettempdir(), <span class="string">'MNIST_data'</span>)</span><br><span class="line">    mnist = input_data.read_data_sets(mnist_save_dir, one_hot=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">    config = tf.ConfigProto()</span><br><span class="line">    config.gpu_options.allow_growth = <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">with</span> tf.Session(config=config) <span class="keyword">as</span> sess:</span><br><span class="line">        sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line">        options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)</span><br><span class="line">        run_metadata = tf.RunMetadata()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">            batch_input, batch_target = mnist.train.next_batch(batch_size)</span><br><span class="line">            feed_dict = &#123;inputs: batch_input,</span><br><span class="line">                         targets: batch_target&#125;</span><br><span class="line"></span><br><span class="line">            sess.run(train_op,</span><br><span class="line">                     feed_dict=feed_dict,</span><br><span class="line">                     options=options,</span><br><span class="line">                     run_metadata=run_metadata)</span><br><span class="line"></span><br><span class="line">            fetched_timeline = timeline.Timeline(run_metadata.step_stats)</span><br><span class="line">            chrome_trace = fetched_timeline.generate_chrome_trace_format()</span><br><span class="line">            <span class="keyword">with</span> open(<span class="string">'timeline_02_step_%d.json'</span> % i, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(chrome_trace)</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æˆ‘ä»¬çš„æ“ä½œå­˜å‚¨åœ¨å˜é‡èŒƒå›´ä¹‹ä¸‹ã€‚ ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ“ä½œåç§°å°†ä»¥èŒƒå›´åç§°å¼€å§‹ï¼Œå¹¶åœ¨æ—¶é—´è½´ä¸Šæ˜ç¡®åŒºåˆ†ã€‚<br>å¦å¤–ï¼Œä»£ç å­˜å‚¨ä¸‰æ¬¡è¿è¡Œè·Ÿè¸ªçš„ç»“æœã€‚ å¦‚æœæˆ‘ä»¬åœ¨CPUä¸Šæ‰§è¡Œè„šæœ¬ï¼Œæˆ‘ä»¬ä¼šæ”¶åˆ°ä¸‰ä¸ªç›¸å¯¹ç±»ä¼¼çš„æ—¶é—´è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/2017/03/25/profiletensorflow/2.png" title="Profiling second script on CPU."><br>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ£€æŸ¥GPUåˆ†æçš„ç»“æœï¼Œç¬¬ä¸€æ¬¡çš„ç»“æœå°†ä¸æ¥ä¸‹æ¥çš„ä¸åŒï¼š</p><img src="/2017/03/25/profiletensorflow/3.png" title="Profiling second script on GPU, 1-st run."><img src="/2017/03/25/profiletensorflow/4.png" title="Profiling second script on GPU, 1-st run."><p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œç¬¬ä¸€æ¬¡è¿è¡ŒGPUæ¯”ä»¥å‰è¦èŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œçš„tensorflowæ‰§è¡Œä¸€äº›GPUåˆå§‹åŒ–ä¾‹ç¨‹ï¼Œåæ¥å°†è¢«ä¼˜åŒ–ã€‚å¦‚æœæƒ³è¦å¾—åˆ°æ›´ç²¾ç¡®çš„ç»“æœï¼Œå°è¯•å…ˆæ‰§è¡Œå¤šæ¬¡å†è¿›è¡Œåˆ†æã€‚<br>æ­¤å¤–ï¼Œæ‰€æœ‰ä¼ å…¥/è¾“å‡ºæµéƒ½ä»¥å¯å˜èŒƒå›´åç§°å¼€å§‹ï¼Œæˆ‘ä»¬ç¡®åˆ‡çŸ¥é“æºä»£ç ä¸­å­˜åœ¨ä¸€ä¸ªæˆ–å¦ä¸€ä¸ªæ“ä½œã€‚</p><h3 id="å°†å¤šæ¬¡è¿è¡Œçš„æ—¶é—´è½´å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­"><a href="#å°†å¤šæ¬¡è¿è¡Œçš„æ—¶é—´è½´å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­" class="headerlink" title="å°†å¤šæ¬¡è¿è¡Œçš„æ—¶é—´è½´å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­"></a>å°†å¤šæ¬¡è¿è¡Œçš„æ—¶é—´è½´å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­</h3><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨æŸä¸ªæ–‡ä»¶ä¸­å­˜å‚¨å¤šä¸ªä¼šè¯è¿è¡Œæ€ä¹ˆåŠï¼Ÿä¸å¹¸çš„æ˜¯ï¼Œè¿™åªèƒ½æ‰‹åŠ¨å®Œæˆã€‚Chromeè·Ÿè¸ªæ ¼å¼å†…å­˜æœ‰æ¯ä¸ªäº‹ä»¶çš„å­˜å‚¨å®šä¹‰ï¼Œå®ƒçš„è¿è¡Œæ—¶é—´ã€‚åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å°†å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œä½†åœ¨ä¸‹ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å°†åªæ›´æ–°è¿è¡Œæ—¶é—´ï¼Œè€Œä¸æ˜¯å®šä¹‰æœ¬èº«ã€‚è¿™é‡Œåªæ˜¯åˆå¹¶äº‹ä»¶çš„ç±»å®šä¹‰ï¼Œä»¥åŠæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°çš„å®Œæ•´ç¤ºä¾‹<sup><a href="#fn_3" id="reffn_3">3</a></sup>ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimeLiner</span>:</span></span><br><span class="line">    _timeline_dict = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_timeline</span><span class="params">(self, chrome_trace)</span>:</span></span><br><span class="line">        <span class="comment"># convert crome trace to python dict</span></span><br><span class="line">        chrome_trace_dict = json.loads(chrome_trace)</span><br><span class="line">        <span class="comment"># for first run store full trace</span></span><br><span class="line">        <span class="keyword">if</span> self._timeline_dict <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            self._timeline_dict = chrome_trace_dict</span><br><span class="line">        <span class="comment"># for other - update only time consumption, not definitions</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> event <span class="keyword">in</span> chrome_trace_dict[<span class="string">'traceEvents'</span>]:</span><br><span class="line">                <span class="comment"># events time consumption started with 'ts' prefix</span></span><br><span class="line">                <span class="keyword">if</span> <span class="string">'ts'</span> <span class="keyword">in</span> event:</span><br><span class="line">                    self._timeline_dict[<span class="string">'traceEvents'</span>].append(event)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save</span><span class="params">(self, f_name)</span>:</span></span><br><span class="line">        <span class="keyword">with</span> open(f_name, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(self._timeline_dict, f)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å°†å¾—åˆ°éå¸¸æ£’çš„åˆå¹¶ä¹‹åçš„æ—¶é—´è½´ï¼š<br><img src="/2017/03/25/profiletensorflow/5.png" title="Merged profiling for 5 runs."><br>ä¼¼ä¹åˆå§‹åŒ–ä»ç„¶éœ€è¦å¾ˆå¤šæ—¶é—´ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ”¾å¤§åˆ°å³è¾¹ï¼š<br><img src="/2017/03/25/profiletensorflow/6.png" title="Merged profiling for 5 runs zoomed."><br>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›é‡å¤çš„æ¨¡å¼ã€‚ runsä¹‹é—´æ²¡æœ‰ä»»ä½•ç‰¹å®šçš„åˆ†éš”ç¬¦ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åŒºåˆ†å®ƒä»¬ã€‚</p><h2 id="åˆ†ææ—¶çš„é—®é¢˜"><a href="#åˆ†ææ—¶çš„é—®é¢˜" class="headerlink" title="åˆ†ææ—¶çš„é—®é¢˜"></a>åˆ†ææ—¶çš„é—®é¢˜</h2><p>åœ¨profilingæœŸé—´å¯èƒ½å­˜åœ¨ä¸€äº›éº»çƒ¦ã€‚é¦–å…ˆï¼Œå®ƒå¯èƒ½æ ¹æœ¬æ— æ³•å·¥ä½œã€‚å¦‚æœä½ é‡åˆ°è¿™æ ·çš„é”™è¯¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I tensorflow/stream_executor/dso_loader.cc:126] Couldn&apos;t open CUDA library libcupti.so.8.0. LD_LIBRARY_PATH:</span><br></pre></td></tr></table></figure></p><p>å¹¶ä¸”ä½ ç¡®ä¿å¦‚æœä¸è¿›è¡Œæ€§èƒ½åˆ†æï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆå¯ä»¥æ ¹æ®Githubçš„è¿™ä¸ªissue<sup><a href="#fn_4" id="reffn_4">4</a></sup>å®‰è£…é¢å¤–çš„åº“<code>libcupti-dev</code>ï¼Œä¸‹é¢è¿™æ¡æŒ‡ä»¤å¯ä»¥è§£å†³é—®é¢˜ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libcupti-dev</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡æ˜¯è¿è¡Œä¸­çš„å»¶è¯¯ã€‚åœ¨æœ€åçš„å›¾åƒä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°è¿è¡Œä¹‹é—´å­˜åœ¨å·®è·ã€‚å¯¹äºå¤§å‹ç½‘ç»œï¼Œè¿™å¯èƒ½éœ€è¦éå¸¸å¤§çš„æ—¶é—´ã€‚è¯¥é”™è¯¯æ— æ³•å®Œå…¨è§£å†³ï¼Œä½†å¯èƒ½ä¼šä½¿ç”¨è‡ªå®šä¹‰C++<code>protobuf</code>åº“æ¥å‡å°‘å»¶è¿Ÿã€‚åœ¨tensorflowæ–‡æ¡£ä¸­æ¸…æ¥šåœ°æè¿°äº†å¦‚ä½•æ‰§è¡Œå®‰è£…ã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>æˆ‘å¸Œæœ›é€šè¿‡è¿™æ ·çš„åˆ†æï¼Œæ‚¨å°†æ›´æ·±å…¥åœ°äº†è§£Tensorflowæ¡†æ¶ä¸­çš„å†…å®¹ï¼Œä»¥åŠè®¡ç®—å›¾çš„å“ªäº›éƒ¨åˆ†å¯èƒ½è¢«ä¼˜åŒ–ã€‚ å«æœ‰CPUå’ŒGPUä¸Šå·²ç»ç”Ÿæˆçš„æ—¶é—´è½´çš„æ‰€æœ‰ä»£ç ç¤ºä¾‹éƒ½å­˜å‚¨åœ¨æ­¤repo<sup><a href="#fn_5" id="reffn_5">5</a></sup>ä¸­ã€‚<br>è°¢è°¢é˜…è¯»ï¼</p><blockquote id="fn_1"><sup>1</sup>. <a href="https://medium.com/towards-data-science/howto-profile-tensorflow-1a49fb18073d#.93geshkgu" target="_blank" rel="noopener">https://medium.com/towards-data-science/howto-profile-tensorflow-1a49fb18073d#.93geshkgu</a><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote><blockquote id="fn_2"><sup>2</sup>. <a href="http://stackoverflow.com/questions/34293714/can-i-measure-the-execution-time-of-individual-operations-with-tensorflow/" target="_blank" rel="noopener">http://stackoverflow.com/questions/34293714/can-i-measure-the-execution-time-of-individual-operations-with-tensorflow/</a><a href="#reffn_2" title="Jump back to footnote [2] in the text."> &#8617;</a></blockquote><blockquote id="fn_3"><sup>3</sup>. <a href="https://github.com/ikhlestov/tensorflow_profiling/blob/master/03_merged_timeline_example.py" target="_blank" rel="noopener">https://github.com/ikhlestov/tensorflow_profiling/blob/master/03_merged_timeline_example.py</a><a href="#reffn_3" title="Jump back to footnote [3] in the text."> &#8617;</a></blockquote><blockquote id="fn_4"><sup>4</sup>. <a href="https://github.com/tensorflow/tensorflow/issues/5282" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/5282</a><a href="#reffn_4" title="Jump back to footnote [4] in the text."> &#8617;</a></blockquote><blockquote id="fn_5"><sup>5</sup>. <a href="https://github.com/ikhlestov/tensorflow_profiling" target="_blank" rel="noopener">https://github.com/ikhlestov/tensorflow_profiling</a><a href="#reffn_5" title="Jump back to footnote [5] in the text."> &#8617;</a></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ª&lt;code&gt;Illarion Khlestov&lt;/code&gt;çš„åšæ–‡ï¼šåŸæ–‡é“¾æ¥&lt;sup&gt;&lt;a href=&quot;#fn_1&quot; id=&quot;reffn_1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;br&gt;å¦‚ä»ŠTensorFlowæ˜¯æœ€å¸¸ç”¨çš„æœºå™¨å­¦ä¹ åº“ä¹‹ä¸€ã€‚æœ‰çš„æ—¶å€™ï¼Œå¯¹Tensorflowè¿›è¡Œæ€§èƒ½å‰–ææ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œé€šè¿‡æ€§èƒ½å‰–æå¯ä»¥äº†è§£ä»€ä¹ˆæ“ä½œæ›´èŠ±è´¹æ—¶é—´ã€‚è¿™å¯ä»¥ç”¨tensorflow timelineæ¨¡å—å®Œæˆã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ‰¾ä¸åˆ°ä»»ä½•æ˜ç¡®çš„æ•™ç¨‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚
    
    </summary>
    
      <category term="Translation" scheme="http://walsvid.github.io/categories/Translation/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://walsvid.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Macé…ç½®LaTeXå’ŒEmacsçš„ç¼–è¾‘ç¯å¢ƒ</title>
    <link href="http://walsvid.github.io/2016/05/14/latex-mac/"/>
    <id>http://walsvid.github.io/2016/05/14/latex-mac/</id>
    <published>2016-05-14T15:38:08.000Z</published>
    <updated>2018-03-15T05:53:04.272Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘éœ€è¦å†™ä¸€ç¯‡è®ºæ–‡ï¼Œæ‰‹å¤´çš„ç”µè„‘æ˜¯MacBook Proï¼Œä»¥å¾€çš„æ—¶å€™ä¸€äº›ç®€å•çš„æ–‡ç« éƒ½æ˜¯ç”¨Markdownæˆ–è€…Wordè¿›è¡Œçš„æ’ç‰ˆï¼Œè¿™æ¬¡å‡†å¤‡æ­£å¼ä¸€äº›ï¼Œäºæ˜¯å°±å‡†å¤‡ç”¨LaTeXã€‚åœ¨ä½¿ç”¨LaTeXçš„æ—¶å€™ï¼Œé…ç½®ç¯å¢ƒæ˜¯å¿…é¡»è¦é¢å¯¹çš„é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« æ—¨åœ¨è§£å†³Macä¸‹LaTeXçš„é…ç½®ï¼Œå¹¶è‡ªç”±çš„ä½¿ç”¨ä¸­è‹±æ–‡è¿›è¡Œä¹¦å†™ã€‚<a id="more"></a></p><h2 id="LaTeX"><a href="#LaTeX" class="headerlink" title="LaTeX"></a>LaTeX</h2><h3 id="é€‰æ‹©å‘è¡Œç‰ˆ"><a href="#é€‰æ‹©å‘è¡Œç‰ˆ" class="headerlink" title="é€‰æ‹©å‘è¡Œç‰ˆ"></a>é€‰æ‹©å‘è¡Œç‰ˆ</h3><p>æˆ‘ä»¬é€‰æ‹©MacTeXä½œä¸ºå®‰è£…çš„LaTeXç‰ˆæœ¬ã€‚MacTeXæä¾›äº†pkgçš„å®‰è£…åŒ…ï¼Œç›´æ¥å®‰è£…å°±å¯ä»¥ã€‚</p><blockquote><p><a href="https://tug.org/mactex/" target="_blank" rel="noopener">å®‰è£…MacTexçš„åœ°å€</a></p></blockquote><p>å¦‚æœä¹ æƒ¯ä½¿ç”¨homebrewè¿›è¡ŒåŒ…ç®¡ç†ï¼Œè¿˜å¯ä»¥ç”¨<code>homebrew</code>çš„<code>caskroom</code>æ¥å®‰è£…ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask info mactex</span><br></pre></td></tr></table></figure></p><p>MacTeXçš„å®‰è£…ååˆ†ç®€å•ï¼Œä¸éœ€è¦é¢å¤–çš„è®¾ç½®ï¼Œç­‰MacTeXå®‰è£…å®Œæˆå°±å¯ä»¥å•¦ã€‚</p><h3 id="OS-X-El-Captain-çš„é¢å¤–è®¾ç½®"><a href="#OS-X-El-Captain-çš„é¢å¤–è®¾ç½®" class="headerlink" title="OS X El Captain çš„é¢å¤–è®¾ç½®"></a>OS X El Captain çš„é¢å¤–è®¾ç½®</h3><p>ç”±äºOSXçš„æ–°ç‰ˆæœ¬El Capitanæœ‰System Integrity Protectionï¼Œ<code>/usr</code>ç›®å½•ä¸èƒ½å¤Ÿå†™å…¥ï¼Œæˆ‘ä»¬MacTeXçš„å®‰è£…ç›®å½•ä¼šè‡ªåŠ¨æ›´æ¢ä¸º<code>/Library</code>ï¼Œä½†æ˜¯MacTeXè‡ªå¸¦çš„ä¸€äº›IDEï¼Œæ¯”å¦‚TeXShopçš„è¿è¡Œç¯å¢ƒæ²¡æœ‰åŠæ—¶æ›´æ¢ã€‚è¿˜éœ€è¦é¢å¤–çš„ä¸€äº›è®¾ç½®ã€‚MacTeXçš„å®˜ç½‘ä¸Šæœ‰ä¸“é—¨çš„æ–‡æ¡£è¿›è¡Œè¯´æ˜ã€‚</p><blockquote><p><a href="https://tug.org/mactex/UpdatingForElCapitan.pdf" target="_blank" rel="noopener">El Capitanè¡¥å……é…ç½®æ–‡æ¡£</a></p></blockquote><p>å°±æ˜¯åœ¨åå¥½è®¾ç½®é‡Œå°†TeXShopçš„å¼•æ“é‡æ–°è®¾ç½®è·¯å¾„å°±å¯ä»¥ã€‚<br><img src="/2016/05/14/latex-mac/texshop.png"></p><h2 id="Emacsçš„é…ç½®"><a href="#Emacsçš„é…ç½®" class="headerlink" title="Emacsçš„é…ç½®"></a>Emacsçš„é…ç½®</h2><p>è™½ç„¶æœ‰TeXShopè¿™ç§è‡ªå¸¦çš„IDEä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä½†æ˜¯è¿™äº›IDEä¸æ˜¯ååˆ†å¥½ç”¨ï¼Œæ²¡æœ‰è¡¥å…¨åŠŸèƒ½ç­‰ç­‰ã€‚æ—¥å¸¸çš„ä»£ç æˆ‘å°±ä½¿ç”¨Emacsè¿›è¡Œç¼–è¾‘ï¼Œè¿™æ¬¡çš„LaTeXç»§ç»­ä½¿ç”¨Emacsã€‚</p><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p>åœ¨<code>PATH</code>ç¯å¢ƒå˜é‡ä¸­æ·»åŠ <code>/Library/TeX/texbin</code>è¿™ä¸€ä¸ªæ–°çš„è·¯å¾„ï¼Œä¿è¯Emacså¯ä»¥æ‰¾åˆ°TeX Engineï¼Œå¦‚æœæ˜¯æ—©äº El Captain çš„ç‰ˆæœ¬ï¼Œç›¸åº”çš„è·¯å¾„æ˜¯<code>/usr/texbin</code></p><h3 id="Spacemacs"><a href="#Spacemacs" class="headerlink" title="Spacemacs"></a>Spacemacs</h3><p>æˆ‘ä½¿ç”¨çš„æ˜¯<code>spacemacs</code>è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸ä»…ä»…å› ä¸ºè¿™ä¸ªé…ç½®æ–‡ä»¶çš„ä½¿ç”¨äººæ•°ä¼—å¤šï¼Œè€Œä¸”ç¤¾åŒºé©±åŠ¨çš„è¯å¼€å‘è¿­ä»£ä¹Ÿååˆ†ç§¯æã€‚ä½¿ç”¨<code>spacemacs</code>çš„è¯ï¼Œåªéœ€è¦åœ¨<code>dotspacemacs-configuration-layers</code>æ·»åŠ <code>latex</code>çš„layerå°±å¯ä»¥äº†ã€‚è¿™ä¸ªlayerå·²ç»é›†æˆäº†LaTeXçš„è‡ªåŠ¨è¡¥å…¨ï¼Œä»£ç é«˜äº®ï¼Œç¼–è¯‘ï¼Œé¢„è§ˆç­‰ä¸€ç³»åˆ—çš„æ“ä½œï¼Œä¸€ç«™å¼æœåŠ¡ï¼Œååˆ†æ–¹ä¾¿ã€‚å®‰è£…å®Œæˆåä¸ºäº†èƒ½æœªæ¥æ”¯æŒä¸­æ–‡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›è®¾ç½®ã€‚æ·»åŠ åˆ°<code>dotspacemacs/user-config ()</code>é‡Œé¢ã€‚<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;;LaTex</span></span><br><span class="line">(<span class="name">add-hook</span> 'LaTeX-mode-hook</span><br><span class="line">        (<span class="name">lambda</span> ()</span><br><span class="line">          (<span class="name">setq</span> TeX-auto-untabify <span class="literal">t</span>     <span class="comment">; remove all tabs before saving</span></span><br><span class="line">                TeX-engine 'xetex       <span class="comment">; use xelatex default</span></span><br><span class="line">                TeX-show-compilation <span class="literal">t</span>)  <span class="comment">; display compilation windows</span></span><br><span class="line">          (<span class="name">TeX-global-PDF-mode</span> <span class="literal">t</span>)       <span class="comment">; PDF mode enable, not plain</span></span><br><span class="line">          (<span class="name">setq</span> TeX-save-query <span class="literal">nil</span>)</span><br><span class="line">          (<span class="name">imenu-add-menubar-index</span>)</span><br><span class="line">          (<span class="name">define-key</span> LaTeX-mode-map (<span class="name">kbd</span> <span class="string">"TAB"</span>) 'TeX-complete-symbol)))</span><br></pre></td></tr></table></figure></p><h3 id="å…¶ä»–é…ç½®æ–‡ä»¶"><a href="#å…¶ä»–é…ç½®æ–‡ä»¶" class="headerlink" title="å…¶ä»–é…ç½®æ–‡ä»¶"></a>å…¶ä»–é…ç½®æ–‡ä»¶</h3><p>ä¸‹ä¸ªauctexçš„å®‰è£…åŒ…</p><blockquote><p><a href="http://www.gnu.org/software/auctex/" target="_blank" rel="noopener">auctexå®‰è£…åŒ…åœ°å€</a></p></blockquote><p>è§£å‹ä¹‹åï¼Œè¿›å…¥ç›¸åº”çš„æ–‡ä»¶å¤¹ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-emacs=/Applications/Emacs.app/Contents/MacOS/Emacs --with-lispdir=/Applications/Emacs.app/Contents/Resources/site-lisp --with-texmf-dir=/usr/<span class="built_in">local</span>/texlive/texmf-local</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±é…ç½®å¥½çš„<code>auctex</code>çš„ç¯å¢ƒï¼Œæ¥ä¸‹æ¥åœ¨<code>.emacs</code>ä¸­åŠ å…¥ï¼š<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">setenv</span> <span class="string">"PATH"</span> (<span class="name">concat</span> <span class="string">"/usr/texbin:/usr/local/bin:"</span> (<span class="name">getenv</span> <span class="string">"PATH"</span>)))</span><br><span class="line">(<span class="name">setq</span> exec-path (<span class="name">append</span> '(<span class="string">"/usr/texbin"</span> <span class="string">"/usr/local/bin"</span>) exec-path))</span><br><span class="line">(<span class="name">load</span> <span class="string">"auctex.el"</span> <span class="literal">nil</span> <span class="literal">t</span> <span class="literal">t</span>)</span><br><span class="line">(<span class="name">load</span> <span class="string">"preview-latex.el"</span> <span class="literal">nil</span> <span class="literal">t</span> <span class="literal">t</span>)</span><br></pre></td></tr></table></figure></p><h2 id="ä¸­æ–‡"><a href="#ä¸­æ–‡" class="headerlink" title="ä¸­æ–‡"></a>ä¸­æ–‡</h2><h3 id="TeXShop"><a href="#TeXShop" class="headerlink" title="TeXShop"></a>TeXShop</h3><p>è¿›å…¥TeXShop -&gt; Preferences -&gt; Sourceï¼Œæ‰¾åˆ°Encodingä¸‹æ‹‰èœå•æ ï¼Œå°†ç¼–ç æ ¼å¼é€‰ä¸ºUnicode(UTF-8)<br>è¿™ç§æ–¹å¼å°±æ˜¯æœ‰è‰¯å¥½çš„ç§»æ¤æ€§ï¼Œåœ¨å¤šä¸ªæ–‡ç« ä¸­éƒ½å¯ä»¥å†™ä¸­æ–‡ã€‚</p><h3 id="æ–‡ç« ä¸­è®¾ç½®"><a href="#æ–‡ç« ä¸­è®¾ç½®" class="headerlink" title="æ–‡ç« ä¸­è®¾ç½®"></a>æ–‡ç« ä¸­è®¾ç½®</h3><p>XeLaTeXå¼•æ“å¯ä»¥å¾ˆå¥½çš„æ”¯æŒä¸­æ–‡ï¼Œå°†å¼•æ“è®¾ç½®ä¸ºXeLaTeXï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„æ¨¡æ¿æ¥å†™ä¸­æ–‡çš„LaTeXæ–‡ç« ã€‚<br><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%!TEX TS-program = xelatex</span></span><br><span class="line"><span class="comment">%!TEX encoding = UTF-8 Unicode</span></span><br><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[12pt]</span><span class="string">&#123;article&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;geometry&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">geometry</span><span class="string">&#123;letterpaper&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;fontspec,xltxtra,xunicode&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">defaultfontfeatures</span><span class="string">&#123;Mapping=tex-text&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">setromanfont</span><span class="string">&#123;SimSun&#125;</span></span> <span class="comment">%è®¾ç½®ä¸­æ–‡å­—ä½“</span></span><br><span class="line"><span class="tag">\<span class="name">XeTeXlinebreaklocale</span></span> "zh"</span><br><span class="line"><span class="tag">\<span class="name">XeTeXlinebreakskip</span> = <span class="number">0pt</span></span> plus 1pt minus 0.1pt <span class="comment">%æ–‡ç« å†…ä¸­æ–‡è‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line"><span class="tag">\<span class="name">newfontfamily</span><span class="string">&#123;\H&#125;</span><span class="string">&#123;SimHei&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">newfontfamily</span><span class="string">&#123;\E&#125;</span><span class="string">&#123;Arial&#125;</span></span>  <span class="comment">%è®¾å®šæ–°çš„å­—ä½“å¿«æ·å‘½ä»¤</span></span><br><span class="line"><span class="tag">\<span class="name">title</span><span class="string">&#123;\H æ ‡é¢˜&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">author</span><span class="string">&#123;Donald&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">date</span><span class="string">&#123;\E\today&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">maketitle</span></span></span><br><span class="line">è¿™ä¸ªæ®µè½ä¸­ï¼Œå¤¹æ‚ç€ä¸€ä¸ª&#123;<span class="tag">\<span class="name">E</span></span> word&#125;ã€‚</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘éœ€è¦å†™ä¸€ç¯‡è®ºæ–‡ï¼Œæ‰‹å¤´çš„ç”µè„‘æ˜¯MacBook Proï¼Œä»¥å¾€çš„æ—¶å€™ä¸€äº›ç®€å•çš„æ–‡ç« éƒ½æ˜¯ç”¨Markdownæˆ–è€…Wordè¿›è¡Œçš„æ’ç‰ˆï¼Œè¿™æ¬¡å‡†å¤‡æ­£å¼ä¸€äº›ï¼Œäºæ˜¯å°±å‡†å¤‡ç”¨LaTeXã€‚åœ¨ä½¿ç”¨LaTeXçš„æ—¶å€™ï¼Œé…ç½®ç¯å¢ƒæ˜¯å¿…é¡»è¦é¢å¯¹çš„é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« æ—¨åœ¨è§£å†³Macä¸‹LaTeXçš„é…ç½®ï¼Œå¹¶è‡ªç”±çš„ä½¿ç”¨ä¸­è‹±æ–‡è¿›è¡Œä¹¦å†™ã€‚
    
    </summary>
    
      <category term="Tutorial" scheme="http://walsvid.github.io/categories/Tutorial/"/>
    
    
      <category term="LaTeX" scheme="http://walsvid.github.io/tags/LaTeX/"/>
    
      <category term="Mac" scheme="http://walsvid.github.io/tags/Mac/"/>
    
      <category term="Emacs" scheme="http://walsvid.github.io/tags/Emacs/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ç”¨ç‰¹æ®Šå­—ç¬¦è¾“å‡ºHelloworld</title>
    <link href="http://walsvid.github.io/2015/11/13/no-brackets-hw/"/>
    <id>http://walsvid.github.io/2015/11/13/no-brackets-hw/</id>
    <published>2015-11-13T11:11:10.000Z</published>
    <updated>2018-03-15T05:53:06.394Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ï¼Œå·¥ç¨‹ç»„çš„å­¦é•¿å»ºè®®æˆ‘ä»¬éƒ½å»åšä¸€ä¸‹å‡èšçš„é¢˜ç›®ï¼Œå¼€é˜”å¼€é˜”çœ¼ç•Œã€‚è™½ç„¶æˆ‘å¯¹å®‰å…¨æ–¹å‘ä¸æ˜¯éå¸¸æ„Ÿå†’ï¼Œä½†æ˜¯æœ‰ä¸€é“æ±‡ç¼–ä¸åº•å±‚ç›¸å…³çš„é¢˜ç›®ç»™æˆ‘ç•™ä¸‹äº†å¾ˆæ·±çš„å°è±¡ã€‚<a id="more"></a></p><h2 id="0-ä¸åŠ é™åˆ¶çš„è¾“å‡ºHello-World"><a href="#0-ä¸åŠ é™åˆ¶çš„è¾“å‡ºHello-World" class="headerlink" title="0. ä¸åŠ é™åˆ¶çš„è¾“å‡ºHello World!"></a>0. ä¸åŠ é™åˆ¶çš„è¾“å‡ºHello World!</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello World!"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç”¨<code>puts</code><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"Hello World!"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå¾ˆå®¹æ˜“å°±èƒ½å†™å‡ºæ¥ã€‚</p><h2 id="1-ä¸ä½¿ç”¨å¼•å·-â€˜â€™-â€œâ€-è¾“å‡ºHello-World"><a href="#1-ä¸ä½¿ç”¨å¼•å·-â€˜â€™-â€œâ€-è¾“å‡ºHello-World" class="headerlink" title="1. ä¸ä½¿ç”¨å¼•å·(â€˜â€™ â€œâ€)è¾“å‡ºHello, World!"></a>1. ä¸ä½¿ç”¨å¼•å·(â€˜â€™ â€œâ€)è¾“å‡ºHello, World!</h2><p>è¿™é“é¢˜ï¼Œæƒ³åˆ°çš„å°±æ˜¯æ›¿æ¢å­—ç¬¦ä¸²çš„å†…å®¹ä¸ºASCIIç ï¼Œè¿˜ç®—ç®€å•.<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">char</span> hello[] = &#123;</span><br><span class="line">    <span class="number">0x48</span>, <span class="number">0x65</span>, <span class="number">0x6c</span>, <span class="number">0x6c</span>, <span class="number">0x6f</span>, <span class="number">0x2c</span>, <span class="number">0x20</span>,   <span class="comment">//Hello,.</span></span><br><span class="line">    <span class="number">0x57</span>, <span class="number">0x6f</span>, <span class="number">0x72</span>, <span class="number">0x6c</span>, <span class="number">0x64</span>, <span class="number">0x21</span>, <span class="number">0x00</span>    <span class="comment">//World!</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">puts</span>(hello);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="2-ä¸ä½¿ç”¨åˆ†å·-è¾“å‡ºHello-World"><a href="#2-ä¸ä½¿ç”¨åˆ†å·-è¾“å‡ºHello-World" class="headerlink" title="2. ä¸ä½¿ç”¨åˆ†å·(;)è¾“å‡ºHello, World!"></a>2. ä¸ä½¿ç”¨åˆ†å·(;)è¾“å‡ºHello, World!</h2><p>è¿™ä¸ªå°±æ›´ç®€å•äº†ï¼Œåˆ©ç”¨putsçš„è¿”å›å€¼ï¼Œå°†è¯­å¥åµŒå¥—åœ¨ifå—ä¸­å³å¯<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">puts</span>(<span class="string">"Hello, World!"</span>)) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="3-ä¸ä½¿ç”¨äº•å·-è¾“å‡ºHello-World"><a href="#3-ä¸ä½¿ç”¨äº•å·-è¾“å‡ºHello-World" class="headerlink" title="3. ä¸ä½¿ç”¨äº•å·(#)è¾“å‡ºHello, World!"></a>3. ä¸ä½¿ç”¨äº•å·(#)è¾“å‡ºHello, World!</h2><h3 id="ä½¿ç”¨ä¸‰å­—ç¬¦-Trigraphs"><a href="#ä½¿ç”¨ä¸‰å­—ç¬¦-Trigraphs" class="headerlink" title="ä½¿ç”¨ä¸‰å­—ç¬¦(Trigraphs)"></a>ä½¿ç”¨ä¸‰å­—ç¬¦(Trigraphs)</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">??=include &lt;stdio.h&gt;</span><br><span class="line"><span class="keyword">int</span> main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"Hello, World!"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>gccï¼Œclangéƒ½éœ€è¦æ·»åŠ ç¼–è¯‘é€‰é¡¹<code>-trigraphs</code></p><h3 id="ä½¿ç”¨åŒå­—ç¬¦-Digraphs"><a href="#ä½¿ç”¨åŒå­—ç¬¦-Digraphs" class="headerlink" title="ä½¿ç”¨åŒå­—ç¬¦(Digraphs)"></a>ä½¿ç”¨åŒå­—ç¬¦(Digraphs)</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%:include &lt;stdio.h&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"Hello, World!"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®GCCçš„æ‰‹å†Œï¼Œè¿™ä¸ªDigraphæ˜¯90å¹´æå‡ºçš„ã€‚<br>è™½ç„¶ä¸ç”¨æ·»åŠ ç¼–è¯‘é€‰é¡¹ï¼Œä½†æ˜¯éœ€è¦æ”¯æŒ<code>-std=iso9899:199409</code>æ ‡å‡†ã€‚</p><h3 id="ä½¿ç”¨GCCçš„builtinå‡½æ•°"><a href="#ä½¿ç”¨GCCçš„builtinå‡½æ•°" class="headerlink" title="ä½¿ç”¨GCCçš„builtinå‡½æ•°"></a>ä½¿ç”¨GCCçš„builtinå‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  __builtin_puts(<span class="string">"Hello, World!"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ©ç”¨Cè¯­è¨€è¿è¡Œæ—¶ä¼šæŸ¥æ‰¾è¿™äº›å‡½æ•°çš„å£°æ˜çš„ç‰¹æ€§ç›´æ¥è‡ªå·±å£°æ˜"><a href="#åˆ©ç”¨Cè¯­è¨€è¿è¡Œæ—¶ä¼šæŸ¥æ‰¾è¿™äº›å‡½æ•°çš„å£°æ˜çš„ç‰¹æ€§ç›´æ¥è‡ªå·±å£°æ˜" class="headerlink" title="åˆ©ç”¨Cè¯­è¨€è¿è¡Œæ—¶ä¼šæŸ¥æ‰¾è¿™äº›å‡½æ•°çš„å£°æ˜çš„ç‰¹æ€§ç›´æ¥è‡ªå·±å£°æ˜"></a>åˆ©ç”¨Cè¯­è¨€è¿è¡Œæ—¶ä¼šæŸ¥æ‰¾è¿™äº›å‡½æ•°çš„å£°æ˜çš„ç‰¹æ€§ç›´æ¥è‡ªå·±å£°æ˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">extern int puts(const char *__s);</span><br><span class="line">int main() &#123;</span><br><span class="line">  puts(&quot;Hello, World!&quot;);</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å†…è”æ±‡ç¼–"><a href="#å†…è”æ±‡ç¼–" class="headerlink" title="å†…è”æ±‡ç¼–"></a>å†…è”æ±‡ç¼–</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> hello[] = <span class="string">"Hello, World!"</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"movl   $hello, %edi"</span>);</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"call   puts"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç›´æ¥call puts<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> hello[] = <span class="string">"Hello, World!"</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"mov    $0x1, %rax"</span>);</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"mov    $0x1, %rdi"</span>);</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"mov    $hello,  %rsi"</span>);</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"mov    $0xd, %rdx"</span>);</span><br><span class="line">    <span class="keyword">asm</span>(<span class="string">"syscall"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œ1å·ç³»ç»Ÿè°ƒç”¨å°±æ˜¯<code>sys_write</code>ï¼Œ<code>sys_write</code>ä¸‰ä¸ªå‚æ•°ï¼šå†™å…¥çš„æ–‡ä»¶ï¼Œå­—ç¬¦ä¸²åœ°å€ï¼Œå­—ç¬¦ä¸²é•¿åº¦ã€‚</p><h2 id="4-ä¸ä½¿ç”¨ä¸å¯è§å­—ç¬¦è¾“å‡ºHello-World"><a href="#4-ä¸ä½¿ç”¨ä¸å¯è§å­—ç¬¦è¾“å‡ºHello-World" class="headerlink" title="4. ä¸ä½¿ç”¨ä¸å¯è§å­—ç¬¦è¾“å‡ºHello, World!"></a>4. ä¸ä½¿ç”¨ä¸å¯è§å­—ç¬¦è¾“å‡ºHello, World!</h2><p>è¿™é¢˜çš„æ€è·¯åœ¨SQLæ³¨å…¥ä¸­ç»å¸¸ç”¨åˆ°ï¼Œå°±æ˜¯ç”¨å¤šè¡Œæ³¨é‡Šæ¥æ›¿ä»£ç©ºæ ¼åˆ†éš”å…³é”®å­—ã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span><span class="comment">/**/</span>hw[]=&#123;<span class="number">0x48</span>,<span class="number">0x65</span>,<span class="number">0x6c</span>,<span class="number">0x6c</span>,<span class="number">0x6f</span>,<span class="number">0x2c</span>,<span class="number">0x20</span>,<span class="number">0x57</span>,<span class="number">0x6f</span>,<span class="number">0x72</span>,<span class="number">0x6c</span>,<span class="number">0x64</span>,<span class="number">0x21</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line"><span class="number">2</span> <span class="keyword">extern</span><span class="comment">/**/</span><span class="keyword">int</span><span class="comment">/**/</span><span class="built_in">puts</span>(<span class="keyword">const</span><span class="comment">/**/</span><span class="keyword">char</span>*__s);<span class="keyword">int</span><span class="comment">/**/</span>main()&#123;<span class="built_in">puts</span>(hw);<span class="keyword">return</span>(<span class="number">0</span>);&#125;</span><br></pre></td></tr></table></figure></p><h2 id="5-ä¸ä½¿ç”¨æ‹¬å·-lt-gt-è¾“å‡ºHello-World"><a href="#5-ä¸ä½¿ç”¨æ‹¬å·-lt-gt-è¾“å‡ºHello-World" class="headerlink" title="5. ä¸ä½¿ç”¨æ‹¬å·( {}[]()&lt;&gt; )è¾“å‡ºHello, World!"></a>5. ä¸ä½¿ç”¨æ‹¬å·( {}[]()&lt;&gt; )è¾“å‡ºHello, World!</h2><p>å…¶å®è¿™ä¸ªé¢˜ç›®çš„è§£å†³åŠæ³•å°±åœ¨ä¹‹å‰çš„å†…è”æ±‡ç¼–çš„ä»£ç ä¸­ï¼Œä¸è¿‡æˆ‘åœ¨Linux64ä½æµ‹è¯•çš„æ—¶å€™ç›´æ¥ç”¨ä¸Šé¢çš„æ±‡ç¼–ä»£ç å¯èƒ½ä¼šå‡ºç°<code>segmentation fault</code>ä»¥åŠprintçš„å­—ç¬¦ä¸²åœ°å€ä¸å¯¹çš„é—®é¢˜ã€‚æ‰€ä»¥æˆ‘è¿›è¡Œäº†æ”¹è¿›ã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"movl $1, %eax"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"movl $1, %ebx"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"leal 16(%eip), %esi"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"movl $13, %edx"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"syscall"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"movl $60,%eax"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"xorl %ebx,%ebx"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"syscall"</span>);</span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">"message: .ascii \"Hello World!\\0\""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æŠŠä¸Šé¢çš„ä»£ç ç¼–è¯‘ä¹‹åç”¨gdbè¿›è¡Œåæ±‡ç¼–ï¼Œç„¶åé€‰æ‹©æŸ¥çœ‹å†…å­˜ï¼Œå¯ä»¥é€‰æ‹©16è¿›åˆ¶æˆ–è€…10è¿›åˆ¶æŸ¥çœ‹ï¼Œç„¶åå°†mainä¸­çš„å†…å®¹è½¬æ¢ä¸ºShellCodeå°±è¡Œäº†ã€‚å…¶å®è¯´éš¾å¹¶ä¸éš¾ï¼Œä½†æ˜¯æœ‰äº›å¼¯è·¯éœ€è¦è‡ªå·±ææ¸…æ¥šã€‚<br>ä¸‹é¢æä¾›ä¸¤ä¸ªç‰ˆæœ¬ï¼š<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> main = <span class="number">0x55</span>, main1 = <span class="number">0x48</span>, main2 = <span class="number">0x89</span>, main3 = <span class="number">0xe5</span>, main4 = <span class="number">0xb8</span>,</span><br><span class="line">           main5 = <span class="number">0x01</span>, main6 = <span class="number">0x00</span>, main7 = <span class="number">0x00</span>, main8 = <span class="number">0x00</span>, main9 = <span class="number">0xbb</span>,</span><br><span class="line">           main10 = <span class="number">0x01</span>, main11 = <span class="number">0x00</span>, main12 = <span class="number">0x00</span>, main13 = <span class="number">0x00</span>,</span><br><span class="line">           main14 = <span class="number">0x67</span>, main15 = <span class="number">0x8d</span>, main16 = <span class="number">0x35</span>, main17 = <span class="number">0x10</span>,</span><br><span class="line">           main18 = <span class="number">0x00</span>, main19 = <span class="number">0x00</span>, main20 = <span class="number">0x00</span>, main21 = <span class="number">0xba</span>,</span><br><span class="line">           main22 = <span class="number">0x0d</span>, main23 = <span class="number">0x00</span>, main24 = <span class="number">0x00</span>, main25 = <span class="number">0x00</span>,</span><br><span class="line">           main26 = <span class="number">0x0f</span>, main27 = <span class="number">0x05</span>, main28 = <span class="number">0xb8</span>, main29 = <span class="number">0x3c</span>,</span><br><span class="line">           main30 = <span class="number">0x00</span>, main31 = <span class="number">0x00</span>, main32 = <span class="number">0x00</span>, main33 = <span class="number">0x31</span>,</span><br><span class="line">           main34 = <span class="number">0xdb</span>, main35 = <span class="number">0x0f</span>, main36 = <span class="number">0x05</span>, main37 = <span class="number">0x48</span>,</span><br><span class="line">           main38 = <span class="number">0x65</span>, main39 = <span class="number">0x6c</span>, main40 = <span class="number">0x6c</span>, main41 = <span class="number">0x6f</span>,</span><br><span class="line">           main42 = <span class="number">0x20</span>, main43 = <span class="number">0x57</span>, main44 = <span class="number">0x6f</span>, main45 = <span class="number">0x72</span>,</span><br><span class="line">           main46 = <span class="number">0x6c</span>, main47 = <span class="number">0x64</span>, main48 = <span class="number">0x21</span>, main49 = <span class="number">0x0a</span>,</span><br><span class="line">           main50 = <span class="number">0x5d</span>;</span><br></pre></td></tr></table></figure></p><p>16è¿›åˆ¶ä½¿ç”¨<code>const char</code>çš„ç‰ˆæœ¬ï¼Œæ³¨æ„ç”¨constè®©ä»£ç åœ¨<code>.rodata</code>æ®µä¸­ï¼Œé˜²æ­¢0x00è¢«ä¼˜åŒ–æ²¡äº†ï¼ˆæˆ‘å°±è¢«å‘äº†å¥½ä¹…ï¼‰ã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> main = <span class="number">-443987883</span>, main1 = <span class="number">440</span>, main2 = <span class="number">113408</span>, main3 = <span class="number">-1922629632</span>,</span><br><span class="line">          main4 = <span class="number">4149</span>, main5 = <span class="number">899584</span>, main6 = <span class="number">84869120</span>, main7 = <span class="number">15544</span>,</span><br><span class="line">          main8 = <span class="number">266023168</span>, main9 = <span class="number">1818576901</span>, main10 = <span class="number">1461743468</span>,</span><br><span class="line">          main11 = <span class="number">1684828783</span>, main12 = <span class="number">-1017312735</span>;</span><br></pre></td></tr></table></figure></p><p>ç”¨<code>int</code>çš„ç‰ˆæœ¬ã€‚<br>ä½†æ˜¯æˆ‘è§‰å¾—è¿™ä¸ªä¸œè¥¿è‚¯å®šæ˜¯è·Ÿæ¶æ„æœ‰å…³ç³»ï¼Œå¾ˆéš¾å†™å‡ºå¹³å°æ— å…³ä»£ç äº†ã€‚<br>æ‰€ä»¥æ ‡æ˜ä¸€ä¸‹æˆ‘çš„æµ‹è¯•ç¯å¢ƒ:<code>Debian 64ä½</code><br>è¿˜å¯ä»¥çœ‹ä¸€ä¸‹è¿™ç¯‡åšå®¢<sup><a href="#fn_1" id="reffn_1">1</a></sup></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸ªé¢˜ç›®çœŸçš„éå¸¸æœ‰æ„æ€ï¼Œè™½ç„¶æœ‰å¥½å¤šä¸œè¥¿ç®—æ˜¯å¥‡æŠ€æ·«å·§å§ï¼Œä¸è¿‡ç¡®å®èƒ½å¤Ÿå­¦åˆ°åº•å±‚çš„å¾ˆå¤šä¸œè¥¿ã€‚</p><blockquote id="fn_1"><sup>1</sup>. <a href="https://jroweboy.github.io/c/asm/2015/01/26/when-is-main-not-a-function.html?utm_source=com.todoist&amp;utm_medium=social" target="_blank" rel="noopener">https://jroweboy.github.io/c/asm/2015/01/26/when-is-main-not-a-function.html?utm_source=com.todoist&amp;utm_medium=social</a><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ï¼Œå·¥ç¨‹ç»„çš„å­¦é•¿å»ºè®®æˆ‘ä»¬éƒ½å»åšä¸€ä¸‹å‡èšçš„é¢˜ç›®ï¼Œå¼€é˜”å¼€é˜”çœ¼ç•Œã€‚è™½ç„¶æˆ‘å¯¹å®‰å…¨æ–¹å‘ä¸æ˜¯éå¸¸æ„Ÿå†’ï¼Œä½†æ˜¯æœ‰ä¸€é“æ±‡ç¼–ä¸åº•å±‚ç›¸å…³çš„é¢˜ç›®ç»™æˆ‘ç•™ä¸‹äº†å¾ˆæ·±çš„å°è±¡ã€‚
    
    </summary>
    
      <category term="Blog" scheme="http://walsvid.github.io/categories/Blog/"/>
    
    
      <category term="C" scheme="http://walsvid.github.io/tags/C/"/>
    
      <category term="æ±‡ç¼–" scheme="http://walsvid.github.io/tags/%E6%B1%87%E7%BC%96/"/>
    
  </entry>
  
</feed>
